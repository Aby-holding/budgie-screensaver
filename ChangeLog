2005-06-10  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (theme_installer_run) 
	(init_capplet): Remove spurious debug messages.

2005-06-10  William Jon McCann  <mccann@jhu.edu>

	* src/file-transfer-dialog.[ch]: New files copied from
	gnome-control-center.

	* src/gnome-screensaver-preferences.c (reload_themes) 
	(transfer_done_cb, transfer_cancel_cb, theme_installer_run) 
	(drag_motion_cb, drag_leave_cb, drag_data_received_cb) 
	(init_capplet): 
	* src/Makefile.am:
	Add basic support for drag and drop of screensaver themes
	onto the capplet.

2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* configure.ac: Post release version bump.

==== 0.5 ====
	
2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* NEWS: Update for release

2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* savers/Makefile.am (EXTRA_DIST): Add theme data.
	* data/Makefile.am (EXTRA_DIST): Add glade and desktop data.

2005-06-07  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (preview_set_theme):
	Make activation time slider insensitive when screensaver is
	disabled.

2005-06-06  William Jon McCann  <mccann@jhu.edu>

	* configure.ac: 
	* src/Makefile.am: Add missing DBUS_CFLAGS.

	Patch from Jaap A. Haitsma <jaap@haitsma.org>.
	Fixes #306487.

2005-06-01  William Jon McCann  <mccann@jhu.edu>

	* src/gs-job.c (load_themes): Only use first theme in search path
	for any given name.

2005-06-01  William Jon McCann  <mccann@jhu.edu>

	* src/gs-manager.c (window_show_cb): 
	* src/gnome-screensaver-preferences.c (init_capplet):
	Look for user themes in g_get_user_data_dir/gnome-screensaver/themes.

2005-06-01  William Jon McCann  <mccann@jhu.edu>

	* src/gs-manager.c (gs_manager_cycle): Use GError.

	* src/gs-job.c (gs_job_set_theme_path, gs_job_get_theme_path)
	(gs_job_prepend_theme_path): Add ability to extend the theme
	search path.
	(theme_info_new, gs_job_theme_info_free, gs_job_theme_info_copy):
	Add ThemeInfo API to handle getting information about themes.
	(load_themes, gs_job_theme_rescan_if_needed, ensure_valid_themes) 
	(gs_job_lookup_theme_info, hash2slist_foreach) 
	(g_hash_table_slist_keys, gs_job_get_theme_list, gs_job_init) 
	(gs_job_finalize, check_command, gs_job_set_theme) 
	(gs_job_new_for_widget, spawn_on_widget, gs_job_start):
	Use a hash table to store theme info.

	* src/gnome-screensaver-preferences.c (preview_set_theme): Handle errors.
	(populate_model): Use new ThemeInfo API.

2005-05-21  Frank Arnold  <farnold@cvs.gnome.org>

	* configure.ac: Added German (de) to ALL_LINGUAS.

2005-05-20  William Jon McCann  <mccann@jhu.edu>

	* src/gs-job.c (nice_process): Operate on the specified pid
	instead of current process.

2005-05-20  William Jon McCann  <mccann@jhu.edu>

	* src/gs-job.c (nice_process, spawn_on_widget):
	Set subprocess priority.

2005-05-20  William Jon McCann  <mccann@jhu.edu>

	* src/gs-monitor.c (gs_monitor_new, gs_monitor_start):
	Split out monitor start.

	* src/gs-listener-dbus.c: Use lowercase name and path.
	(gs_listener_acquire): Set error correctly.

	* src/gnome-screensaver.c (main): Remove dbus stuff and let
	gs-monitor fail if it cannot get the service.

	* src/gnome-screensaver-command.c: Use lowercase name and path.

2005-05-18  William Jon McCann  <mccann@jhu.edu>

	* src/gs-listener-dbus.c (gs_listener_acquire):
	Make sure input isn't NULL.

2005-05-18  William Jon McCann  <mccann@jhu.edu>

	* src/gs-monitor.c (manager_blanked_cb, manager_unblanked_cb): 
	* src/gs-listener-dbus.[ch] (gs_listener_send_signal_activated) 
	(gs_listener_send_signal_deactivated):
	Send Activated or Deactivated signals over dbus.

2005-05-09  William Jon McCann  <mccann@jhu.edu>

	* configure.ac: 
	* src/gnome-screensaver-command.c (screensaver_is_running): 
	* src/gnome-screensaver.c (check_dbus): 
	* src/gs-listener-dbus.c (screensaver_is_running) 
	(gs_listener_acquire):
	Support the both the 0.23 and 0.3 dbus APIs.  Fixes #303288.

	Patch from Diego Gonzalez <diego@pemas.net>.

2005-05-05  William Jon McCann  <mccann@jhu.edu>

	* savers/.cvsignore: Added.

2005-05-05  Dennis Cranston <dennis_cranston@yahoo.com>

	* data/gnome-screensaver-preferences.glade: Adjust widget
	spacing according to HIG.

2005-05-05  William Jon McCann  <mccann@jhu.edu>

	* data/gnome-screensaver-preferences.glade: Don't use a
	horiz. scrollbar on the themes list.  And don't fill space.

2005-05-05  William Jon McCann  <mccann@jhu.edu>

	* src/gs-monitor.c (listener_poke_cb, gs_monitor_init): 
	* src/gs-listener-dbus.c (gs_listener_message_handler) 
	(gs_listener_class_init): 
	* src/gnome-screensaver-command.c (do_command):
	Rename ping to poke to avoid confustion with dbus .Ping.

2005-05-05  William Jon McCann  <mccann@jhu.edu>

	* configure.ac: Remove app-default stuff.

2005-05-05  William Jon McCann  <mccann@jhu.edu>

	* README: Removed GTK bug as known issue since we work around it.

2005-05-05  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (config_set_theme) 
	(preview_set_theme, setup_treeview_selection): Guard against
	calling strcmp with null.

	* src/gs-prefs.c:
	* src/gnome-screensaver-preferences.c:
	* data/gnome-screensaver.schemas.in:
	Rename gconf key to "themes" and add it to schemas.

2005-05-05  William Jon McCann  <mccann@jhu.edu>

	* src/gs-window-x11.c (gs_window_real_show, spawn_on_window) 
	(is_logout_enabled, popup_dialog_idle) 
	(gs_window_set_logout_enabled, gs_window_set_logout_timeout) 
	(gs_window_set_property, gs_window_get_property) 
	(gs_window_finalize): 
	* src/gs-prefs.c (gs_prefs_load_from_gconf, key_changed_cb): 
	* src/gs-monitor.c (prefs_changed_cb, gs_monitor_init): 
	* src/gs-manager.c (gs_manager_set_logout_enabled) 
	(gs_manager_set_lock_timeout, gs_manager_set_logout_timeout) 
	(gs_manager_set_property, gs_manager_get_property) 
	(gs_manager_class_init, window_show_cb, gs_manager_create_window): 
	* src/gs-lock-plug.c (gs_lock_plug_set_logout_enabled) 
	(gs_lock_plug_set_property, gs_lock_plug_get_property) 
	(gs_lock_plug_class_init, logout_button_clicked) 
	(gs_lock_plug_init): 
	* src/gnome-screensaver-dialog.c (popup_dialog_idle): 
	* src/Makefile.am: 
	* data/gnome-screensaver.schemas.in:
	Add support for showing a logout button after a specified
	amount of time.  This depends on the fix for bug #149447.
	Fixes #301710.

2005-05-04  William Jon McCann  <mccann@jhu.edu>

	* src/gs-watcher-x11.c (gs_watcher_reset):
	Add a convenience function for resetting the idle
	watcher.

	* src/gs-monitor.c (listener_ping_cb, gs_monitor_init): 
	* src/gs-listener-dbus.c (gs_listener_message_handler) 
	(gs_listener_class_init): 
	* src/gnome-screensaver-command.c (do_command):
	Add ping dbus method that can be used to simulate user
	activity or as a safe way to probe if the screensaver is
	running.

2005-05-01  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* configure.ac: Added Spanish (es) to ALL_LINGUAS.

2005-04-29  William Jon McCann  <mccann@jhu.edu>

	* data/gnome-screensaver-preferences.glade:
	Now even simpler.

2005-04-29  William Jon McCann  <mccann@jhu.edu>

	* data/gnome-screensaver-preferences.glade: 
	* src/gnome-screensaver-preferences.c (config_get_blank_delay) 
	(config_get_theme, setup_treeview_selection, init_capplet):
	Support unwritable gconf keys in the interface.

2005-04-26  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (compare_theme) 
	(setup_treeview): Sort the theme list.

2005-04-26  William Jon McCann  <mccann@jhu.edu>

	* src/gs-prefs.c (gs_prefs_load_from_gconf, key_changed_cb) 
	(gs_prefs_init, gs_prefs_finalize): 
	* src/gs-monitor.c (prefs_changed_cb, gs_monitor_init):
	More renaming savers to themes.

2005-04-26  William Jon McCann  <mccann@jhu.edu>

	* src/gs-manager.c (gs_manager_set_themes, select_theme) 
	(gs_manager_cycle, window_show_cb): 
	* src/gs-job.c (getnodeset, get_first_xpath_prop) 
	(get_xml_config_string, gs_job_theme_parse, gs_job_finalize) 
	(gs_job_set_command, gs_job_set_theme, gs_job_new_for_widget) 
	(spawn_on_widget, gs_job_start): 
	* src/gnome-screensaver-preferences.c (config_get_theme) 
	(config_set_theme, preview_set_theme, get_themes_dir) 
	(theme_entry_free, get_theme_list, populate_model) 
	(tree_selection_changed_cb, setup_treeview) 
	(setup_treeview_selection): 
	* src/Makefile.am: 
	* savers/Makefile.am: 
	* configure.ac:
	Add support for XML theme configuration.  Only support configuration
	via theme names.  The mapping to a command is done by the XML config.

2005-04-26  William Jon McCann  <mccann@jhu.edu>

	* src/gs-watcher-x11.c (gs_watcher_set_dpms): 
	* src/gs-prefs.c (gs_prefs_load_from_gconf, key_changed_cb): 
	* src/gs-monitor.c (prefs_changed_cb, gs_monitor_init):
	Enable DPMS support.

2005-04-25  William Jon McCann  <mccann@jhu.edu>

	* src/gs-manager.c (gs_manager_cycle, cycle_timeout) 
	(gs_manager_set_cycle_delay): Don't cycle the theme
	while the lock dialog is up.

2005-04-25  William Jon McCann  <mccann@jhu.edu>

	* src/gs-window-x11.c (spawn_on_window, wait_on_child) 
	(gs_window_dialog_finish, command_watch):
	Don't leak pipe fds.  Be more correct about handling pids.

	* src/gs-job.c (spawn_on_widget): Uncomment channel unref.

2005-04-25  William Jon McCann  <mccann@jhu.edu>

	* src/gs-job.c (wait_on_child, gs_job_died, gs_job_finalize) 
	(spawn_on_widget, command_watch, gs_job_stop):
	Don't leak pipe fds.  Be more correct about handling pids.

2005-04-23  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (init_capplet):
	Use screensaver icon here too.

2005-04-23  William Jon McCann  <mccann@jhu.edu>

	* data/gnome-screensaver-preferences.desktop.in:
	Use screensaver icon.  Fix comment.

	Patch from Jaap A. Haitsma <jaap@haitsma.org>.
	Fixes #301709

2005-04-23  William Jon McCann  <mccann@jhu.edu>

	* src/gs-lock-plug.c (button_get_label_widget) 
	(button_mnemonic_activate_click, switch_page, gs_lock_plug_init):
	Allow mnemonic activation with keyboard grabbed.
	Work around bug 172998.

2005-04-22  William Jon McCann  <mccann@jhu.edu>

	* savers/popsquares.c (screenhack_init, screenhack_iter) 
	(screenhack_destroy, new_window, get_window, do_restart) 
	(do_configure_event, do_event, main):
	Add support for configuration events.

2005-04-22  William Jon McCann  <mccann@jhu.edu>

	* savers/popsquares.c (screenhack_init, screenhack_iter) 
	(screenhack_destroy): Make functions static for now.

2005-04-22  William Jon McCann  <mccann@jhu.edu>

	* data/gnome-screensaver-preferences.glade:
	Use vbox/hbox instead of frame.

2005-04-22  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (saver_entry_free) 
	(get_saver_list, populate_model):
	Construct saver list more dynamically.

2005-04-22  William Jon McCann  <mccann@jhu.edu>

	* savers/Makefile.am: 
	* savers/popsquares.c: 
	* src/gs-job.c: 
	* src/Makefile.am: 
	* configure.ac: 
	* Makefile.am:
	Add gdk port of popsquares saver that uses the
	desktop theme and doesn't support configuration.

2005-04-20  William Jon McCann  <mccann@jhu.edu>

	* src/gs-window-x11.c (gs_window_override_user_time) 
	(gs_window_real_realize):
	Try to work around focus stealing prevention.

2005-04-20  William Jon McCann  <mccann@jhu.edu>

	* README: Added bugzilla info, etc.

2005-04-20  William Jon McCann  <mccann@jhu.edu>

	* src/gs-watcher-x11.c (gs_watcher_set_timeout): 
	* src/gs-prefs.c (key_changed_cb): 
	* src/gs-monitor.c (prefs_changed_cb):
	Make daemon respond to blank delay gconf changes.

2005-04-20  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (init_capplet): 
	* data/gnome-screensaver-preferences.glade:
	Make keyboard mnemonic activation work.

2005-04-20  William Jon McCann  <mccann@jhu.edu>

	* src/gnome-screensaver-preferences.c (config_get_blank_delay) 
	(config_set_blank_delay, blank_delay_value_changed_cb) 
	(init_capplet): Add support for the blank delay.

	* data/gnome-screensaver-preferences.glade: Set default size.

2005-04-19  Gareth Owen  <gowen72@yahoo.com>

	* configure.ac: Added en_GB to ALL_LINGUAS

2005-04-19  William Jon McCann  <mccann@jhu.edu>

	* src/gs-job.c (gs_job_set_command):
	Handle NULL commands.

2005-04-19  William Jon McCann  <mccann@jhu.edu>

	* src/gs-job.c (gs_job_finalize):
	Only signal if pid > 0.

2005-04-19  William Jon McCann  <mccann@jhu.edu>

	* .cvsignore: Updated.
	
	* src/gs-prefs.c (key_changed_cb, gs_prefs_init) 
	(gs_prefs_finalize): 
	* src/gs-monitor.c (prefs_changed_cb, gs_monitor_init):
	Enable monitoring of gconf settings.

	* src/gs-manager.c (window_show_cb): 
	* src/gs-job.c (widget_get_id_string, gs_job_set_widget) 
	(find_command, gs_job_set_command, gs_job_new) 
	(gs_job_new_for_widget, spawn_on_widget, gs_job_start):
	Change jobs to run on a widget instead of GSWindow in
	order to support capplet.  Interpret gconf saver value
	as a full path for security.

	* src/gnome-screensaver-preferences.c: 
	* src/Makefile.am: 
	* data/gnome-screensaver-preferences.glade: 
	* data/gnome-screensaver-preferences.desktop.in: 
	* data/Makefile.am: 
	* configure.ac:
	Add screensaver preferences capplet.

2005-04-15  William Jon McCann  <mccann@jhu.edu>

	* src/gs-manager.c (window_show_cb, window_map_event_cb) 
	(gs_manager_create_window, gs_manager_create, gs_manager_blank):
	Set up windows and jobs only after showing and lock only
	after map-event.

	* src/gs-manager.c (select_saver, gs_manager_cycle): 
	* src/gs-job.c (gs_job_set_command, gs_job_new_for_window) 
	(spawn_on_window):
	Use const where appropriate.

2005-04-15  William Jon McCann  <mccann@jhu.edu>

	* src/gs-lock-plug.c (gs_lock_plug_init):
	Don't indent the password entry.  Use a
	smaller font for the progress text so that
	it isn't too distracting.

2005-04-15  William Jon McCann  <mccann@jhu.edu>

	* src/gs-lock-plug.c (gs_lock_plug_init):
	Use label instead of entry for username.

	* configure.ac: Use variable for dbus version.

2005-04-15  Adam Weinberger  <adamw@gnome.org>

	* configure.ac: Added en_CA to ALL_LINGUAS.

2005-04-15  Raphael Higino  <raphaelh@cvs.gnome.org>

	* configure.ac: Added pt_BR to ALL_LINGUAS.

2005-04-15  Funda Wang  <fundawang@linux.net.cn>

	* configure.ac: Added "zh_CN" to ALL_LINGUAS.

2005-04-14  William Jon McCann  <mccann@jhu.edu>

	* src/gs-grab-x11.c (gs_grab_move_mouse):
	Don't regrab pointer here.

2005-04-14  William Jon McCann  <mccann@jhu.edu>

	* src/gs-grab-x11.c (gs_grab_get_mouse) 
	(gs_grab_get_keyboard_and_mouse):
	Grab and release pointer initially.

2005-04-14  Christian Rose  <menthos@menthos.com>

	* configure.ac: Added "sv" to ALL_LINGUAS.

